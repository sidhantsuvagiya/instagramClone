(this.webpackJsonpreactpracties=this.webpackJsonpreactpracties||[]).push([[0],{56:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(18),i=a.n(c),o=a(16),s=a(46),r=(s.a.initializeApp({apiKey:"AIzaSyBmJUNCqvM5Rsq0Rv4536zxzXUDtnMJJr8",authDomain:"instagram-413da.firebaseapp.com",projectId:"instagram-413da",storageBucket:"instagram-413da.appspot.com",messagingSenderId:"965882139626",appId:"1:965882139626:web:298773257f006664a45893",measurementId:"G-FCCS6EFPLD"}),s.a.auth()),l=s.a.storage(),d=s.a.firestore(),j=a(35),u=(a(56),a(124)),m=a(47),b=a(128),O=a(5),g=function(e){var t=e.pid,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],s=c[1],r=Object(n.useState)([]),l=Object(o.a)(r,2),j=l[0],g=l[1],h=Object(n.useState)(3),p=Object(o.a)(h,2),f=p[0],x=p[1],v=Object(n.useState)([]),y=Object(o.a)(v,2);y[0],y[1];Object(n.useEffect)((function(){var e;return t&&(e=d.collection("igdata").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,comment:e.data()}})))}))),function(){e()}}),[t]),Object(n.useEffect)((function(){S(0,3)}),[i]);var S=function(e,t){var a=i.slice(e,t);g(a)};return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"card",children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)("div",{id:"commentlable",children:"Comments:-"}),j.map((function(e){var t=e.id,a=e.comment;return Object(O.jsxs)(m.a,{vcomponent:"p",className:"comment",children:[Object(O.jsx)("strong",{children:a.username})," ",a.text]},t)})),j.length<i.length?Object(O.jsx)(b.a,{style:{width:"100%",margin:"auto",textTransform:"capitalize"},color:"primary",size:"small",onClick:function(){S(0,f+3),x(f+3)},children:"More..."}):Object(O.jsx)("div",{})]})})})},h=a(72),p=a.n(h),f=a(129),x=a(142),v=a(130),y=a(131),S=a(132),C=a(139),k=function(e){var t,a=e.user,c=e.postUser,i=e.id,s=e.email,r=e.imgURL,l=e.captionVal,h=e.timeStamp,k=Object(n.useState)(1),N=Object(o.a)(k,2),w=N[0],E=N[1],U=Object(n.useState)(""),z=Object(o.a)(U,2),I=z[0],L=z[1],F=Object(n.useState)("gray"),W=Object(o.a)(F,2),P=W[0],A=W[1],B=Object(n.useState)("gray"),M=Object(o.a)(B,2),R=M[0],D=M[1],T=Object(n.useState)(0),J=Object(o.a)(T,2),_=J[0],q=J[1],V=Object(n.useState)([]),G=Object(o.a)(V,2),K=G[0],X=G[1],Y=Object(n.useState)(!0),H=Object(o.a)(Y,2),Q=H[0],Z=H[1];Object(n.useEffect)((function(){D("#"+Math.floor(16777215*Math.random()).toString(16))}),[]),Object(n.useEffect)((function(){var e;return A("gray"),i&&(e=d.collection("igdata").doc(i).collection("likes").onSnapshot((function(e){q(e.size),X(e.docs.map((function(e){return{lid:e.id,likes:e.data()}}))),e.docs.map((function(e){e.data().email==s&&A("red")}))}))),function(){e()}}),[s]);var $=function(){d.collection("igdata").doc(i).collection("likes").onSnapshot((function(e){q(e.size),X(e.docs.map((function(e){return{lid:e.id,likes:e.data()}})))}))};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)(f.a,{avatar:Object(O.jsx)(x.a,{className:"post__avatar",alt:c,src:c,style:{backgroundColor:R}}),title:c,id:"avatarText",subheader:h}),Object(O.jsx)("img",{id:"postimg",src:r,alt:"postimage"}),Object(O.jsx)(u.a,{children:Object(O.jsxs)(m.a,{className:"caption",vcomponent:"caption",children:[Object(O.jsx)("span",{children:Object(O.jsx)("strong",{children:"@".concat(c)})}),l]})}),Object(O.jsx)(g,{pid:i}),a?Object(O.jsx)(v.a,{children:Object(O.jsxs)(y.a,{value:w,onClick:function(e,t){E(t)},showLabels:!0,children:[Object(O.jsx)(S.a,{onClick:function(){var e=0;K.map((function(t){var a=t.lid;if(t.likes.email==s)return d.collection("igdata").doc(i).collection("likes").doc(a).delete(),void(e=1)})),e?(A("gray"),console.log("grayu"),$()):(d.collection("igdata").doc(i).collection("likes").add({email:s}),A("red"),$())},style:{color:P},label:_,icon:Object(O.jsx)(p.a,{})}),Object(O.jsxs)("form",{className:"commentSection",children:[Object(O.jsx)(C.a,{style:{margin:8},placeholder:"Add Comment",type:"text",value:I,onChange:function(e){L(e.target.value),Z(!e.target.value)}}),Object(O.jsx)(b.a,(t={className:"commentBtn"},Object(j.a)(t,"className","post_button"),Object(j.a)(t,"color","primary"),Object(j.a)(t,"disabled",Q),Object(j.a)(t,"onClick",(function(){d.collection("igdata").doc(i).collection("comments").add({timestamp:new Date,text:I,username:a}),L(""),Z(!0)})),Object(j.a)(t,"size","small"),Object(j.a)(t,"children","post"),t))]})]})}):null]},i)})},N=a(134),w=a(141),E=a(135),U=a(136),z=a(137),I=a(11),L=a(138),F=a.p+"static/media/Instagram-Logo.888d5c91.png",W=a(73),P=a.n(W),A=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),j=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(o.a)(m,2),h=g[0],p=g[1],f=function(){c(!1),u(!1),p(!1)},x=Object(n.useState)(!1),v=Object(o.a)(x,2),y=v[0],S=v[1],W=Object(n.useState)(""),A=Object(o.a)(W,2),B=A[0],M=A[1],R=Object(n.useState)(""),D=Object(o.a)(R,2),T=D[0],J=D[1],_=Object(n.useState)(""),q=Object(o.a)(_,2),V=q[0],G=q[1],K=Object(n.useState)([]),X=Object(o.a)(K,2),Y=X[0],H=X[1],Q=Object(n.useState)(3),Z=Object(o.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(n.useState)(null),oe=Object(o.a)(ie,2),se=oe[0],re=oe[1],le=Object(n.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1],me=Object(N.a)({root:{height:0,textAlign:"center",fontSize:"90"},progress:{width:"100%"}})();Object(n.useEffect)((function(){d.collection("igdata").orderBy("timestamp","desc").onSnapshot((function(e){H(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("header",{children:[Object(O.jsx)("img",{className:"instalogo",src:F,alt:"",srcset:""}),y?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"signupLogin",children:[Object(O.jsx)(b.a,{ml:5,className:"logout",variant:"contained",color:"secondary",onClick:function(e){r.signOut(),G(null),M(""),J(""),S(!1)},children:"Log out"}),Object(O.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){p(!0)},children:"Add Post"})]}),Object(O.jsxs)(w.a,{style:{maxWidth:350,margin:"auto"},open:h,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(E.a,{className:me.root,id:"form-dialog-title",children:"Upload Post"}),Object(O.jsx)(U.a,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{autoFocus:!0,margin:"dense",label:"Caption",value:ne,onChange:function(e){return ce(e.target.value)},type:"text",fullWidth:!0}),Object(O.jsx)(C.a,{color:"primary",margin:"dense",style:{margin:"8px 0 14px 0"},onChange:function(e){re(e.target.files[0])},type:"file",fullWidth:!0}),Object(O.jsx)(L.a,{variant:"determinate",value:je})]})}),Object(O.jsxs)(z.a,{children:[Object(O.jsx)(b.a,{onClick:f,variant:"outlined",color:"secondary",size:"large",children:"Cancle"}),Object(O.jsx)(b.a,{color:"primary",onClick:function(){se&&se.size<=3e6?l.ref("images/".concat(se.name)).put(se).on("state_changed",(function(e){ue(Math.round(e.bytesTransferred/e.totalBytes*100))}),(function(e){console.log(e),alert(e.message)}),(function(){l.ref("images").child(se.name).getDownloadURL().then((function(e){d.collection("igdata").add({timestamp:new Date,userName:V,caption:ne,imgURL:e,likes:0})})),re(null),ce(""),ue(0),f()})):alert("Error Please Choose An Image OR Less Than 3MB ")},variant:"outlined",startIcon:Object(O.jsx)(P.a,{}),children:"Upload"})]})]})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"signupLogin",children:[Object(O.jsx)(b.a,{variant:"outlined",color:"primary",onClick:function(){c(!0)},children:"Sign In"}),Object(O.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){u(!0)},children:"Sign Up"})]}),Object(O.jsxs)(w.a,{open:a,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(E.a,{className:me.root,id:"form-dialog-title",children:"Sign In"}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{autoFocus:!0,margin:"dense",label:"Enter Email",type:"email",onChange:function(e){return M(e.target.value)},fullWidth:!0}),Object(O.jsx)(C.a,{margin:"dense",label:"Enter Password",onChange:function(e){return J(e.target.value)},type:"password",fullWidth:!0})]}),Object(O.jsxs)(z.a,{children:[Object(O.jsx)(b.a,{onClick:f,variant:"outlined",color:"secondary",children:"Cancel"}),Object(O.jsx)(b.a,{onClick:function(){r.signInWithEmailAndPassword(B,T).then((function(e){r.onAuthStateChanged((function(e){null!==e&&G(e.displayName)})),S(!0),f()})).catch((function(e){alert(e.message),f()}))},variant:"outlined",color:"primary",children:"Sign In"})]})]}),Object(O.jsxs)(w.a,{style:{maxWidth:350,margin:"auto"},open:j,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(E.a,{className:me.root,id:"form-dialog-title",children:"Sign Up"}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(C.a,{style:{textTransform:I.a},autoFocus:!0,margin:"dense",label:"Your Name",type:"text",onChange:function(e){e.target.value&&G(e.target.value)},fullWidth:!0}),Object(O.jsx)(C.a,{margin:"dense",label:"Enter Email ",type:"email",onChange:function(e){return M(e.target.value)},fullWidth:!0}),Object(O.jsx)(C.a,{margin:"dense",label:"Enter Password",type:"password",onChange:function(e){return J(e.target.value)},fullWidth:!0})]}),Object(O.jsxs)(z.a,{children:[Object(O.jsx)(b.a,{onClick:f,variant:"outlined",color:"secondary",children:"Cancel"}),Object(O.jsx)(b.a,{onClick:function(){r.createUserWithEmailAndPassword(B,T).then((function(e){e.user.updateProfile({displayName:V}),S(!0),f()})).catch((function(e){alert(e.message),f()}))},variant:"outlined",color:"primary",children:"Sign Up"})]})]})]})]}),Object(O.jsx)("div",{className:"postContainer",children:Y.map((function(e,t,a){var n=e.id,c=e.post;return t<$?Object(O.jsx)(k,{user:V,postUser:c.userName,id:n,email:B,imgURL:c.imgURL,captionVal:c.caption,timeStamp:String(c.timestamp.toDate().toLocaleString())},n):null}))}),$<Y.length?Object(O.jsx)(b.a,{color:"primary",style:{width:"100%",margin:"auto",textTransform:"capitalize"},onClick:function(){return ee($+3)},children:"Show More Post..."}):null]})},B=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(A,{})})})};i.a.render(Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.4341c4e0.chunk.js.map